<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DigiAgro</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{
      --verde:#2a5c2a;
      --marron:#6b4f2c;
      --bgCard:rgba(255,255,255,.88);
      --shadow:0 4px 10px rgba(0,0,0,.12);
      --radius:14px;
      --safe: env(safe-area-inset-bottom);
    }

    /* Reset b√°sico y tipograf√≠a fluida */
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      line-height:1.4;
      background-image:url('fondo.png');
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
      background-attachment:fixed;
      /* espacio por si el chat flota abajo en m√≥viles */
      padding-bottom: max(72px, var(--safe));
    }

    /* Header con video */
    header{
      position:relative;
      min-height: 48vh;
      max-height: 520px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      text-align:center;
      overflow:hidden;
      isolation:isolate; /* asegura z-index correcto */
    }
    header video{
      position:absolute; inset:0;
      width:100%; height:100%; object-fit:cover;
      z-index:-1;
    }
    header h1{
      color:#fff; margin: 24px 12px 0;
      font-size: clamp(28px, 5vw, 56px);
      font-weight: 800;
      text-shadow: 0 2px 14px rgba(0,0,0,.45);
      animation: fadeInHeader 800ms ease-out both;
    }
    @keyframes fadeInHeader{
      from{opacity:0; transform: translateY(-10px)}
      to{opacity:1; transform: translateY(0)}
    }

    .marquesina{
      position:absolute; bottom:16px; left:50%; transform:translateX(-50%);
      background: rgba(0,0,0,.5);
      color:#fff; padding:8px 14px; border-radius: 999px;
      backdrop-filter: blur(4px);
      max-width: 92%;
    }
    .marquesina p{margin:0; font-weight:700; font-size: clamp(14px, 3.2vw, 20px)}

    /* Logo pegado */
    .logo-sticky{
      position: fixed; bottom: 14px; left: 14px;
      height: 64px; opacity:.7; z-index: 1000;
      transition: transform .2s ease, opacity .2s ease;
    }
    .logo-sticky:hover{ opacity:1; transform: scale(1.06) }

    /* Navegaci√≥n responsive */
    nav{
      background: var(--marron);
      color:#fff;
      position: sticky; top:0; z-index: 900;
      padding: 8px 12px;
    }
    .nav-inner{
      max-width: 1100px; margin: 0 auto;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand{font-weight:800; letter-spacing:.3px}
    .links{display:flex; gap:18px; flex-wrap:wrap}
    .links a{
      color:#fff; text-decoration:none; font-weight:700;
      padding:10px 8px; border-radius:10px;
    }
    .links a:hover{ text-decoration: underline }

    /* Bot√≥n hamburguesa */
    .hamburger{
      display:none; cursor:pointer; border:0; background:transparent; color:#fff;
      padding:10px; margin-right: -6px;
    }
    .hamburger svg{ width:26px; height:26px }

    /* Contenido */
    .contenido{ background-color: transparent; }
    section{
      display:flex; justify-content:center; align-items:center;
      flex-direction:column; padding: 36px 16px;
    }
    .seccion{
      width: min(760px, 92%);
      background: var(--bgCard); border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: clamp(16px, 3.6vw, 24px);
      animation: fadeInContent .7s ease both;
    }
    @keyframes fadeInContent{
      from{opacity:0; transform: translateY(10px)}
      to{opacity:1; transform: translateY(0)}
    }
    .seccion h2{
      color: var(--verde);
      font-size: clamp(20px, 3.6vw, 28px);
      margin-top: 0;
    }
    .seccion p{ margin: .4rem 0; font-size: clamp(14px, 2.8vw, 16px) }

    /* Chat: resaltar bot√≥n y asegurar z-index */
    @keyframes pulse{
      0%{ box-shadow: 0 0 0 0 rgba(42,92,42,.55) }
      70%{ box-shadow: 0 0 0 16px rgba(42,92,42,0) }
      100%{ box-shadow: 0 0 0 0 rgba(42,92,42,0) }
    }
    .n8n-chat-button,
    .chat-widget-button,
    [data-chat-widget-button]{
      animation: pulse 2.2s infinite;
      transition: transform .25s ease, background-color .25s ease !important;
      z-index: 2147483647 !important;
      position: fixed;
    }
    .n8n-chat-button:hover,
    .chat-widget-button:hover,
    [data-chat-widget-button]:hover{
      background-color:#4CAF50 !important;
      transform: scale(1.12) !important;
    }
    #chat-widget-root,
    .chat-widget-container,
    .n8n-chat-container{
      z-index: 2147483647 !important;
      position: fixed !important;
    }

    /* Mobile-first tweaks */
    @media (max-width: 900px){
      .links{ display:none }          /* oculto men√∫ ancho */
      .hamburger{ display:inline-flex }
    }
    /* Men√∫ m√≥vil desplegable */
    .links.mobile{
      display:flex; flex-direction:column; gap:6px; padding: 8px 0 6px;
    }
    .links.mobile a{
      padding: 12px; border-radius: 8px; background: rgba(255,255,255,.08);
    }

    /* Ajustes m√≥viles fuertes */
    @media (max-width: 600px){
      header{ min-height: 44vh; }
      .logo-sticky{ height: 50px; bottom: 12px; left: 12px }
      .marquesina{ bottom: 12px; }
      /* Evitar jitter de fondo fijo en m√≥viles */
      body{ background-attachment: scroll; }
    }

    /* Respeta preferencias de usuario */
    @media (prefers-reduced-motion: reduce){
      *{ animation: none !important; transition: none !important; scroll-behavior:auto !important }
    }
  </style>
</head>
<body>
  <!-- Logo -->
  <img src="DigiAgro.png" alt="Logo DigiAgro" class="logo-sticky" />

  <div class="contenido">
    <header>
      <video autoplay muted loop playsinline poster="poster.jpg">
        <source src="productor.mp4" type="video/mp4" />
        Tu navegador no soporta videos HTML5.
      </video>
      <h1>DigiAgro</h1>
      <div class="marquesina">
        <p>üöú Optimizamos procesos para un agro m√°s √°gil y digital. üöú</p>
      </div>
    </header>

    <nav>
      <div class="nav-inner">
        <div class="brand">DigiAgro</div>
        <button class="hamburger" aria-label="Abrir men√∫" aria-expanded="false" aria-controls="mobileMenu">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6h18M3 12h18M3 18h18"/></svg>
        </button>
        <div class="links" id="desktopLinks">
          <a href="index.html">Inicio</a>
          <a href="servicios.html">Servicios</a>
          <a href="nosotros.html">Nosotros</a>
          <a href="contacto.html">Contacto</a>
          <a href="senasa.html">SENASA</a>
        </div>
      </div>
      <!-- Men√∫ m√≥vil oculto por defecto -->
      <div class="links mobile" id="mobileMenu" hidden>
        <a href="index.html">Inicio</a>
        <a href="servicios.html">Servicios</a>
        <a href="nosotros.html">Nosotros</a>
        <a href="contacto.html">Contacto</a>
        <a href="senasa.html">SENASA</a>
      </div>
    </nav>

    <section>
      <div class="seccion">
        <h2>üí° Bienvenido a DigiAgro üí°</h2>
        <p>En <strong>DigiAgro</strong> conectamos el agro con la tecnolog√≠a para que tomes mejores decisiones, automatices tus procesos y optimices cada etapa de tu trabajo.</p>
        <p>Somos una <strong>startup enfocada en transformar la gesti√≥n agr√≠cola</strong> con herramientas digitales simples, efectivas y a tu medida.</p>
        <p>üå± Explor√° nuestras secciones para descubrir c√≥mo podemos ayudarte.</p>
        <p>‚ú® Porque en DigiAgro <strong>creamos soluciones digitales que hacen tu vida m√°s f√°cil</strong>, para que puedas enfocarte en lo que realmente importa: Tu negocio.</p>
      </div>
    </section>
  </div>

  <!-- Contenedor opcional para overlay (no molesta en mode:'window') -->
  <div id="n8n-chat"></div>

  <!-- n8n Chat -->
  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />
  <script type="module">
    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

    createChat({
      webhookUrl: 'https://jjg.app.n8n.cloud/webhook/8c90edd6-52a3-4069-8afd-d97a9fd86e31/chat',
      webhookConfig: { method: 'POST', headers: {} },
      target: '#n8n-chat',           // si cambi√°s a mode:'overlay', ya ten√©s el div
      mode: 'window',                // 'window' o 'overlay'
      chatInputKey: 'chatInput',
      chatSessionKey: 'sessionId',
      loadPreviousSession: true,
      metadata: {},
      showWelcomeScreen: false,
      defaultLanguage: 'es',
      initialMessages: ['Hola! üëã','¬øEn qu√© te puedo ayudar hoy?'],
      i18n: {
        es: {
          title: 'Soy DIGIBOT ü§ñ',
          subtitle: 'Estoy 24/7 para ayudarte',
          footer: '',
          getStarted: 'Nueva conversaci√≥n',
          inputPlaceholder: 'Escrib√≠ tu consulta‚Ä¶'
        }
      },
      enableStreaming: false,
    });

    // Toggle del men√∫ m√≥vil accesible
    const btn = document.querySelector('.hamburger');
    const mobileMenu = document.getElementById('mobileMenu');
    btn?.addEventListener('click', () => {
      const isOpen = !mobileMenu.hasAttribute('hidden');
      if (isOpen) {
        mobileMenu.setAttribute('hidden','');
        btn.setAttribute('aria-expanded','false');
      } else {
        mobileMenu.removeAttribute('hidden');
        btn.setAttribute('aria-expanded','true');
      }
    });
  </script>
</body>
</html>
