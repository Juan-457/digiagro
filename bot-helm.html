<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DigiAgro ‚Äì Chat</title>
  <meta name="color-scheme" content="light dark" />
  <meta name="robots" content="noindex, nofollow" />

  <!-- Estilos del widget n8n -->
  <link href="https://cdn.jsdelivr.net/npm/@n8n/chat/dist/style.css" rel="stylesheet" />

  <style>
    :root{
      --verde:#2a5c2a; --marron:#6b4f2c; --bg:#f6f7f8; --safe: env(safe-area-inset-bottom);
      --chat-size: 84px; /* tama√±o de la burbuja del chat */
    }

    /* P√°gina limpia */
    html,body{height:100%;margin:0;background:var(--bg);font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}

    /* ==== Ocultar barra marr√≥n / header si existiera ==== */
    header, nav, .dg header, .dg nav { display:none !important; }

    /* ==== Ajustes del bot√≥n flotante del chat n8n ==== */
    .n8n-chat-container { z-index: 2147483000 !important; }

    /* Reubicar el trigger al centro inferior */
    .n8n-chat-container .n8n-chat-trigger,
    .n8n-chat-container .n8n-chat-toggle,
    .n8n-chat-container [class*="trigger"],
    .n8n-chat-container [class*="toggle"] {
      position: fixed !important;
      left: 50% !important;
      right: auto !important;
      bottom: max(28px, var(--safe)) !important;
      transform: translateX(-50%) !important;
    }

    /* Tama√±o de la burbuja */
    .n8n-chat-container .n8n-chat-trigger button,
    .n8n-chat-container .n8n-chat-toggle button,
    .n8n-chat-container button[class*="trigger"],
    .n8n-chat-container button[class*="toggle"] {
      width: var(--chat-size) !important;
      height: var(--chat-size) !important;
      border-radius: 999px !important;
      box-shadow: 0 14px 32px rgba(0,0,0,.2) !important;
    }

    /* √çcono un poco m√°s grande */
    .n8n-chat-container .n8n-chat-trigger svg,
    .n8n-chat-container .n8n-chat-toggle svg,
    .n8n-chat-container [class*="trigger"] svg,
    .n8n-chat-container [class*="toggle"] svg {
      transform: scale(1.2);
    }

    /* Accesibilidad: reducir animaciones si el usuario lo pide */
    @media (prefers-reduced-motion: reduce){
      *{animation:none !important; transition:none !important; scroll-behavior:auto !important}
    }
  </style>
</head>
<body>

  <!-- (Contenido opcional tuyo) -->

  <!-- Script del widget (modo ventana, se abre solo) -->
  <script type="module">
    import { createChat } from 'https://cdn.jsdelivr.net/npm/@n8n/chat/dist/chat.bundle.es.js';

    const chat = createChat({
      webhookUrl: 'https://jjg.app.n8n.cloud/webhook/8c90edd6-52a3-4069-8afd-d97a9fd86e31/chat',
      webhookConfig: { method: 'POST', headers: {} },
      mode: 'window',              // ventana flotante
      showWelcomeScreen: false,
      defaultLanguage: 'es',
      loadPreviousSession: true,
      chatInputKey: 'chatInput',
      chatSessionKey: 'sessionId',
      initialMessages: ['¬°Hola! üëã', '¬øEn qu√© te puedo ayudar hoy?'],
      i18n: {
        es: {
          title: 'Soy DIGIBOT ü§ñ',
          subtitle: 'Estoy 24/7 para ayudarte',
          footer: '',
          getStarted: 'Nueva conversaci√≥n',
          inputPlaceholder: 'Escrib√≠ tu consulta',
        },
      },
      enableStreaming: false,
    });

    // Exponer y abrir autom√°ticamente
    window.n8nChat = chat;
    window.addEventListener('load', () => {
      setTimeout(() => window.n8nChat?.open?.(), 60); // abrilo apenas monta
    });

    // Si no quer√©s que se abra solo, coment√° la l√≠nea de arriba.
  </script>

  <noscript>Activ√° JavaScript para usar el chat.</noscript>
</body>
</html>
